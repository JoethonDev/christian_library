<!-- templates/components/media_card.html -->
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<div class="col-md-6 col-lg-4">
    <div class="card border-0 h-100 media-card" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 20px; box-shadow: 0 8px 32px rgba(184, 134, 11, 0.1); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; cursor: pointer;">
        <div class="ratio ratio-16x9 position-relative overflow-hidden" style="border-radius: 20px 20px 0 0;">
            {% if item.videometa.thumbnail %}
                <img src="{{ item.videometa.thumbnail.url }}" class="object-fit-cover w-100 h-100" loading="lazy" style="transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
            {% elif item.thumbnail %}
                <img src="{{ item.thumbnail.url }}" class="object-fit-cover w-100 h-100" loading="lazy" style="transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
            {% else %}
                <div class="d-flex align-items-center justify-content-center h-100" style="background: #F8F9FA;">
                    {% if item.content_type == 'video' %}
                        <i class="bi bi-play-circle" style="font-size: 3rem; color: #87CEEB;"></i>
                    {% elif item.content_type == 'audio' %}
                        <i class="bi bi-music-note-beamed" style="font-size: 3rem; color: #E6E6FA;"></i>
                    {% else %}
                        <i class="bi bi-journal-bookmark" style="font-size: 3rem; color: #F5DEB3;"></i>
                    {% endif %}
                </div>
            {% endif %}
            
            <!-- Content Type Badge -->
            <div class="position-absolute top-0 end-0 m-3">
                <span class="badge rounded-pill px-3 py-2 fw-medium" style="
                    {% if item.content_type == 'video' %}background: #87CEEB;
                    {% elif item.content_type == 'audio' %}background: #E6E6FA;
                    {% else %}background: #F5DEB3;{% endif %}
                    color: white; font-size: 0.8rem;">
                    {% if item.content_type == 'video' %}<i class="bi bi-play me-1"></i>
                    {% elif item.content_type == 'audio' %}<i class="bi bi-music-note me-1"></i>
                    {% else %}<i class="bi bi-file-text me-1"></i>{% endif %}
                    {{ item.get_content_type_display }}
                </span>
            </div>
            
            <!-- Play Overlay -->
            <div class="position-absolute top-50 start-50 translate-middle play-overlay" style="opacity: 0; transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                <div class="d-flex align-items-center justify-content-center" style="width: 60px; height: 60px; background: rgba(255, 255, 255, 0.95); border-radius: 50%; backdrop-filter: blur(10px); box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);">
                    <i class="bi bi-play-fill" style="font-size: 1.5rem; color: #8B0000; margin-left: 3px;"></i>
                </div>
            </div>
        </div>
        
        <div class="card-body p-4">
            <div class="mb-2">
                {% if item.tags.exists %}
                    {% for tag in item.tags.all %}
                    <span class="badge rounded-pill me-1" style="background: rgba(255, 255, 255, 0.9); color: #8B0000; font-size: 0.7rem; font-weight: 600; border: 1px solid rgba(139, 0, 0, 0.2);">
                        {{ tag }}
                    </span>
                    {% endfor %}
                {% else %}
                <span class="badge rounded-pill" style="background: rgba(255, 255, 255, 0.9); color: #8B0000; font-size: 0.7rem; font-weight: 600; border: 1px solid rgba(139, 0, 0, 0.2);">
                    {% trans "Uncategorized" %}
                </span>
                {% endif %}
            </div>
            <h5 class="card-title fw-bold mb-3" style="color: #8B0000; font-family: 'Crimson Text', serif; line-height: 1.3;">
                {% if LANGUAGE_CODE == 'ar' %}{{ item.title_ar|truncatechars:60 }}{% else %}{{ item.title_en|truncatechars:60 }}{% endif %}
            </h5>
            {% if item.headline %}
            <div class="search-highlight-snippet mb-2 small text-muted" style="line-height:1.5;">
                {{ item.headline|safe }}
            </div>
            {% elif item.description_ar %}
            <p class="card-text small text-muted mb-3" style="line-height: 1.4;">
                {{ item.description_ar|truncatechars:100 }}
            </p>
            {% endif %}
            </h5>
            
            {% if item.description_ar %}
            <p class="card-text small text-muted mb-3" style="line-height: 1.4;">
                {{ item.description_ar|truncatechars:100 }}
            </p>
            {% endif %}
            
            <div class="d-flex align-items-center justify-content-between">
                <small class="text-muted">
                    <i class="bi bi-clock me-1"></i>{{ item.created_at|timesince }} {% trans "ago" %}
                </small>
                <a href="{% if item.content_type == 'video' %}{% url 'frontend_api:video_detail' item.id %}{% elif item.content_type == 'audio' %}{% url 'frontend_api:audio_detail' item.id %}{% else %}{% url 'frontend_api:pdf_detail' item.id %}{% endif %}" 
                   class="btn btn-primary rounded-pill px-4 btn-sm stretched-link" style="font-weight: 500; background: #8B0000; border: none;">
                    {% trans "View" %} <i class="bi bi-arrow-right ms-1"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<style>
.media-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 16px 48px rgba(184, 134, 11, 0.2) !important;
}

.media-card:hover img {
    transform: scale(1.05);
}

.media-card:hover .play-overlay {
    opacity: 1 !important;
}

.media-card {
    cursor: pointer;
}
</style>