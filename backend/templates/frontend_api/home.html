<!-- templates/frontend_api/home.html - Coptic Orthodox Theme -->
{% extends "base.html" %}
{% load i18n static %}

{% block content %}

<!-- Main Title Section -->
<section class="hero-coptic py-5 mb-5">
    <div class="text-center">
        <h1 class="hero-title-coptic">
            {% get_current_language as LANGUAGE_CODE %}
            {% if LANGUAGE_CODE == 'ar' %}
                مكتبة الحبر الجليل الانبا ابرام مطران الفيوم و رئيس دير الملاك غبريال النقلون
            {% else %}
                Library of His Grace Bishop Abram, Metropolitan of Fayoum and Abbot of Archangel Gabriel Monastery, Naqlun
            {% endif %}
        </h1>
    </div>
</section>

<!-- Hero Image & Bullet Points -->
<section class="mb-5">
    <!-- Responsive Layout: Image above text on mobile, side-by-side on desktop -->
    <div class="row align-items-center">
        <!-- Image Column -->
        <div class="col-12 col-lg-6 mb-4 mb-lg-0 order-1 order-lg-1">
            <div class="card card-coptic">
                <img src="{% static 'images/hero_section.jpg' %}" 
                     class="card-img img-fluid rounded" 
                     alt="{% if LANGUAGE_CODE == 'ar' %}مكتبة الأنبا أبرام{% else %}Bishop Abram Library{% endif %}"
                     style="object-fit: cover; width: 100%;"
                     onerror="this.src='https://via.placeholder.com/800x600/800000/FFFFFF?text=Bishop+Abram+Library';">
            </div>
        </div>
        
        <!-- Text Column -->
        <div class="col-12 col-lg-6 order-2 order-lg-2">
            <div class="card card-coptic">
                <div class="card-body p-4">
                    <h4 class="heading-font text-maroon mb-4 text-center">
                        {% if LANGUAGE_CODE == 'ar' %}
                            نبذة عن المكتبة
                        {% else %}
                            About the Library
                        {% endif %}
                    </h4>
                    <div class="row">
                        <div class="col-12">
                            <!-- Bishop Abram Biography Section -->
                            <div class="body-font lh-lg">
                                <h6 class="heading-font text-golden mb-3 text-center">
                                    {% if LANGUAGE_CODE == 'ar' %}
                                        نيافة الحبر الجليل
                                    {% else %}
                                        His Grace the Bishop
                                    {% endif %}
                                </h6>
                                <div class="body-font text-muted">
                                    {% if LANGUAGE_CODE == 'ar' %}
                                        <p class="mb-3"><strong>نبذة عن نيافة الأنبا أبرام:</strong></p>
                                        <ul class="mb-3" style="padding-right: 1.2em;">
                                            <li>من مواليد قنا 11 / 2 / 1950م.</li>
                                            <li>تخرج من الكلية الإكليريكية 1975 م.</li>
                                            <li>درس بمعهد الدراسات القبطية قسم الدراسات الأفريقية تحت إشراف الأستاذ الدكتور / زاهر رياض، وطلب منه السفر لأثيوبيا لمدة سته أشهر كشرط لتحضير رسالة الماجستير بالقسم لكن لم يتمكن من ذلك.</li>
                                            <li>ذهب لدير الأنبا بيشوي كطالب رهبنة في 2/8/1976 م ،</li>
                                            <li>ثم تمت سيامته راهباً في 21/3/1977م باسم أبونا الراهب تيموثاوس الأنبا بيشوي</li>
                                            <li>سيم قساً في 29/1/1978م ، وخدم بدولة الإمارات العربية  أبو ظبي – دبى - الشارقة ، سلطنة عمان ودولة البحرين ، في المدة 1/12/1978- 22/4/1984م .</li>
                                            <li>تم سيامته قمصاً في 1/8/1979م .</li>
                                            <li>تمت سيامته أسقفاً بيد قداسة البابا شنودة الثالث في عيد العنصرة  2/6/1985م .</li>
                                            <li>في فبراير 1994م حصل على شهادة دبلوم معهد الدراسات القبطية قسم التاريخ بتقدير ممتاز.</li>
                                            <li>في 27 يناير 2004م مُنح معهد الدراسات القبطية نيافة الأنبا أبرام درجة الدكتوراه بتقدير ممتاز مع مرتبة الشرف الأولى في التاريخ القبطى لرسالة عنوانها "الفيوم بين الماضي والحاضر".</li>
                                            <li>تم ترقيه إلى مطران في: 25 نوفمبر 2018 م.</li>
                                            <li>لنيافته أنشطة عديدة داخل المجمع المقدس، فنيافته عضو في:</li>
                                            <ul style="padding-right: 1.2em;">
                                                <li>لجنة السكرتارية.</li>
                                                <li>لجنة الإيمان والتعليم والتشريع</li>
                                                <li>لجنة الأديرة والرهبنة.</li>
                                                <li>لجنة الرعاية والخدمة.</li>
                                                <li>لجنة العلاقات الكنسية.</li>
                                                <li>مشرفاً على نشاط الأرثوذكسية ومواجهة التحديات الطائفية المنبثقة من لجنة الرعاية والخدمة بالمجمع المقدس .</li>
                                                <li>عضو لجنة الحوار بين الكنائس الأرثوذكسية والبروتستانتية والكاثوليكية .</li>
                                                <li>عضو المجلس الأعلى للكليات الإكليريكية .</li>
                                                <li>مشرفاً مساعداً للجان الرجاء لخدمة المرضي للكرازة، التابعة للجنة الرعاية والخدمة .</li>
                                                <li>مشرفاً على دير الأنبا توماس السائح - العامر.</li>
                                                <li>مدرس اللاهوت المقارن بالكلية الأكليريكية منذ عام 1984م .</li>
                                                <li>مدرس بالكلية الإكليريكية بالإسكندرية لعام 1986 ، 1987 م .</li>
                                                <li>مدرس بمعهد الكتاب المقدس بدمنهور لعام 2000/2001 م .</li>
                                                <li>عضو لجنة الوحدة الوطنية بمحافظة الفيوم .</li>
                                            </ul>
                                        </ul>
                                    {% else %}
                                        <p class="mb-3"><strong>Bishop Abram III, Metropolitan of Fayoum and Abbot of Archangel Gabriel Monastery, Naqlun (1985- )</strong></p>
                                        <p class="mb-3">Became a monk at Saint Bishoy Monastery, Wadi El-Natrun, with the monastic name Fr. Monk Archimandrite Timothy of Saint Bishoy</p>
                                        <p class="mb-3"><strong>Episcopal Ordination:</strong><br> June 2, 1985. Ordained by His Holiness Pope Shenouda III (117th Pope)</p>
                                        <p class="mb-0"><strong>Metropolitan Rank:</strong> November 25, 2018. By His Holiness Pope Tawadros II</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Gallery Section -->
<section class="mb-5">
    <div class="text-center mb-4">
        <h3 class="heading-font text-maroon">
            {% if LANGUAGE_CODE == 'ar' %}
                معرض الصور
            {% else %}
                Photo Gallery
            {% endif %}
        </h3>
        <p class="body-font text-muted">
            {% if LANGUAGE_CODE == 'ar' %}
                لقطات من المكتبة ودير الملاك غبريال
            {% else %}
                Glimpses of the library and Archangel Gabriel Monastery
            {% endif %}
        </p>
    </div>
    
    <div class="gallery-grid">
        {% for i in "1234567" %}
        <div class="gallery-item">
            <div class="card card-coptic h-100">
                <img src="{% static 'images/gallery_' %}{{ forloop.counter }}.jpg"
                     class="card-img-top"
                     alt="{% if LANGUAGE_CODE == 'ar' %}صورة رقم {{ forloop.counter }}{% else %}Gallery Image {{ forloop.counter }}{% endif %}"
                     style="aspect-ratio: 4/3; object-fit: cover;">
                <div class="card-body p-3">
                    <h6 class="heading-font text-maroon mb-0">
                        {% if LANGUAGE_CODE == 'ar' %}صورة رقم {{ forloop.counter }}{% else %}Gallery Image {{ forloop.counter }}{% endif %}
                    </h6>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Statistics Section -->
<section class="mb-5">
    <div class="text-center mb-4">
        <h3 class="heading-font text-maroon">
            {% if LANGUAGE_CODE == 'ar' %}
                إحصائيات المكتبة
            {% else %}
                Library Statistics
            {% endif %}
        </h3>
    </div>
    
    <div class="row g-4">
        <div class="col-lg-3 col-md-6">
            <div class="card card-coptic text-center h-100">
                <div class="card-body py-4">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center" 
                             style="width: 60px; height: 60px; background: var(--color-maroon); border-radius: 50%; border: 3px solid var(--color-golden-ochre);">
                            <i class="bi bi-play-circle text-white fs-2"></i>
                        </div>
                    </div>
                    <h3 class="heading-font text-maroon fw-bold mb-2">{{ stats.total_videos|floatformat:0 }}</h3>
                    <p class="body-font text-muted mb-0">{% trans "Videos" %}</p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-3 col-md-6">
            <div class="card card-coptic text-center h-100">
                <div class="card-body py-4">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center" 
                             style="width: 60px; height: 60px; background: var(--color-golden-ochre); border-radius: 50%; border: 3px solid var(--color-maroon);">
                            <i class="bi bi-music-note text-white fs-2"></i>
                        </div>
                    </div>
                    <h3 class="heading-font text-maroon fw-bold mb-2">{{ stats.total_audios|floatformat:0 }}</h3>
                    <p class="body-font text-muted mb-0">{% trans "Audio" %}</p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-3 col-md-6">
            <div class="card card-coptic text-center h-100">
                <div class="card-body py-4">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center" 
                             style="width: 60px; height: 60px; background: var(--color-maroon); border-radius: 50%; border: 3px solid var(--color-golden-ochre);">
                            <i class="bi bi-journal-bookmark text-white fs-2"></i>
                        </div>
                    </div>
                    <h3 class="heading-font text-maroon fw-bold mb-2">{{ stats.total_pdfs|floatformat:0 }}</h3>
                    <p class="body-font text-muted mb-0">{% trans "Books" %}</p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-3 col-md-6">
            <div class="card card-coptic text-center h-100">
                <div class="card-body py-4">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center" 
                             style="width: 60px; height: 60px; background: var(--color-golden-ochre); border-radius: 50%; border: 3px solid var(--color-maroon);">
                            <i class="bi bi-tags text-white fs-2"></i>
                        </div>
                    </div>
                    <h3 class="heading-font text-maroon fw-bold mb-2">{{ stats.total_tags|floatformat:0 }}</h3>
                    <p class="body-font text-muted mb-0">{% trans "Categories" %}</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Access Section -->
<section class="mb-5">
    <div class="text-center mb-4">
        <h3 class="heading-font text-maroon">
            {% if LANGUAGE_CODE == 'ar' %}
                تصفح المحتوى
            {% else %}
                Browse Content
            {% endif %}
        </h3>
    </div>
    
    <div class="row g-4 justify-content-center">
        <div class="col-lg-4 col-md-6 col-sm-8">
            <a href="{% url 'frontend_api:videos' %}" class="text-decoration-none">
                <div class="card card-coptic hover-maroon-glow h-100">
                    <div class="card-body text-center py-5">
                        <div class="mb-3">
                            <i class="bi bi-play-circle text-maroon" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="heading-font text-maroon">{% trans "Video Library" %}</h5>
                        <p class="body-font text-muted small">
                            {% if LANGUAGE_CODE == 'ar' %}
                                محاضرات ومواعظ روحية
                            {% else %}
                                Spiritual lectures and sermons
                            {% endif %}
                        </p>
                    </div>
                </div>
            </a>
        </div>
        
        <div class="col-lg-4 col-md-6 col-sm-8">
            <a href="{% url 'frontend_api:audios' %}" class="text-decoration-none">
                <div class="card card-coptic hover-golden-glow h-100">
                    <div class="card-body text-center py-5">
                        <div class="mb-3">
                            <i class="bi bi-music-note text-golden" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="heading-font text-maroon">{% trans "Audio Library" %}</h5>
                        <p class="body-font text-muted small">
                            {% if LANGUAGE_CODE == 'ar' %}
                                تسجيلات صوتية وتراتيل
                            {% else %}
                                Audio recordings and hymns
                            {% endif %}
                        </p>
                    </div>
                </div>
            </a>
        </div>
        
        <div class="col-lg-4 col-md-6 col-sm-8">
            <a href="{% url 'frontend_api:pdfs' %}" class="text-decoration-none">
                <div class="card card-coptic hover-maroon-glow h-100">
                    <div class="card-body text-center py-5">
                        <div class="mb-3">
                            <i class="bi bi-journal-bookmark text-maroon" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="heading-font text-maroon">{% trans "Digital Books" %}</h5>
                        <p class="body-font text-muted small">
                            {% if LANGUAGE_CODE == 'ar' %}
                                كتب ومخطوطات رقمية
                            {% else %}
                                Digital books and manuscripts
                            {% endif %}
                        </p>
                    </div>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- Search Section -->
<section class="mb-5">
    <div class="card card-coptic">
        <div class="card-header-coptic">
            <h4 class="heading-font text-white text-center mb-0">
                {% if LANGUAGE_CODE == 'ar' %}
                    البحث في المكتبة
                {% else %}
                    Search the Library
                {% endif %}
            </h4>
        </div>
        <div class="card-body p-4">
            <form action="{% url 'frontend_api:search' %}" method="get">
                <div class="row g-3 align-items-end">
                    <div class="col-md-8">
                        <input type="text" name="q" class="form-control form-control-lg" 
                               placeholder="{% trans 'Search videos, audio, books...' %}"
                               style="border-color: var(--color-golden-ochre);">
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-primary btn-lg w-100" type="submit">
                            <i class="bi bi-search me-2"></i>{% trans "Search" %}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- Featured Content Sections (Conditional) -->
{% if latest_videos %}
<section class="mb-5">
    <div class="d-flex align-items-center mb-4">
        <div class="d-inline-flex align-items-center justify-content-center me-3 sacred-shadow" 
             style="width: 50px; height: 50px; background: var(--color-maroon); border-radius: 12px; border: 2px solid var(--color-golden-ochre);">
            <i class="bi bi-play-circle text-white fs-4"></i>
        </div>
        <div>
            <h3 class="heading-font text-maroon mb-1">{% trans "Latest Videos" %}</h3>
            <p class="body-font text-muted mb-0 small">{% trans "Recently added spiritual content" %}</p>
        </div>
        <a href="{% url 'frontend_api:videos' %}" class="btn btn-secondary ms-auto rounded-pill px-4">
            {% trans "View All" %} <i class="bi bi-arrow-right ms-1"></i>
        </a>
    </div>
    <div class="row g-4">
        {% for item in latest_videos %}
            {% include "components/media_card.html" with item=item %}
        {% endfor %}
    </div>
</section>
{% endif %}

{% if latest_audios %}
<section class="mb-5">
    <div class="d-flex align-items-center mb-4">
        <div class="d-inline-flex align-items-center justify-content-center me-3 sacred-shadow" 
             style="width: 50px; height: 50px; background: var(--color-golden-ochre); border-radius: 12px; border: 2px solid var(--color-maroon);">
            <i class="bi bi-music-note text-white fs-4"></i>
        </div>
        <div>
            <h3 class="heading-font text-maroon mb-1">{% trans "Latest Audio" %}</h3>
            <p class="body-font text-muted mb-0 small">{% trans "Inspiring sermons and teachings" %}</p>
        </div>
        <a href="{% url 'frontend_api:audios' %}" class="btn btn-secondary ms-auto rounded-pill px-4">
            {% trans "View All" %} <i class="bi bi-arrow-right ms-1"></i>
        </a>
    </div>
    <div class="row g-4">
        {% for item in latest_audios %}
            {% include "components/media_card.html" with item=item %}
        {% endfor %}
    </div>
</section>
{% endif %}

{% if latest_pdfs %}
<section class="mb-5">
    <div class="d-flex align-items-center mb-4">
        <div class="d-inline-flex align-items-center justify-content-center me-3 sacred-shadow" 
             style="width: 50px; height: 50px; background: var(--color-maroon); border-radius: 12px; border: 2px solid var(--color-golden-ochre);">
            <i class="bi bi-journal-bookmark text-white fs-4"></i>
        </div>
        <div>
            <h3 class="heading-font text-maroon mb-1">{% trans "Recent Books" %}</h3>
            <p class="body-font text-muted mb-0 small">{% trans "Sacred texts and study materials" %}</p>
        </div>
        <a href="{% url 'frontend_api:pdfs' %}" class="btn btn-secondary ms-auto rounded-pill px-4">
            {% trans "View All" %} <i class="bi bi-arrow-right ms-1"></i>
        </a>
    </div>
    <div class="row g-4">
        {% for item in latest_pdfs %}
            {% include "components/media_card.html" with item=item %}
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- Featured Tags -->
{% if popular_tags %}
<section class="mb-5">
    <div class="d-flex align-items-center mb-4">
        <div class="d-inline-flex align-items-center justify-content-center me-3 sacred-shadow" 
             style="width: 50px; height: 50px; background: var(--color-golden-ochre); border-radius: 12px; border: 2px solid var(--color-maroon);">
            <i class="bi bi-tags text-white fs-4"></i>
        </div>
        <div>
            <h3 class="heading-font text-maroon mb-1">{% trans "Popular Categories" %}</h3>
            <p class="body-font text-muted mb-0 small">{% trans "Explore content by topics" %}</p>
        </div>
    </div>
    <div class="row g-4">
        {% for tag in popular_tags %}
        <div class="col-lg-3 col-md-6">
            <div class="card card-coptic h-100 hover-golden-glow">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="d-inline-flex align-items-center justify-content-center" 
                             style="width: 60px; height: 60px; background: var(--color-maroon); border-radius: 16px; border: 2px solid var(--color-golden-ochre);">
                            <i class="bi bi-tag text-white fs-3"></i>
                        </div>
                    </div>
                    <h5 class="heading-font text-maroon mb-2">
                        {% get_current_language as LANGUAGE_CODE %}
                        {% if LANGUAGE_CODE == 'ar' %}
                            {{ tag.name_ar|default:tag.name_en }}
                        {% else %}
                            {{ tag.name_en|default:tag.name_ar }}
                        {% endif %}
                    </h5>
                    <p class="body-font text-muted small mb-3">{{ tag.content_count }} {% trans "items" %}</p>
                    <a href="{% url 'frontend_api:search' %}?tag={{ tag.id }}" class="btn btn-primary rounded-pill px-4">
                        {% trans "Explore" %}
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- Empty State Message -->
{% if not latest_videos and not latest_audios and not latest_pdfs %}
<section class="text-center py-5">
    <div class="mb-4">
        <div class="d-inline-flex align-items-center justify-content-center" 
             style="width: 80px; height: 80px; background: var(--color-off-white); border: 3px solid var(--color-golden-ochre); border-radius: 50%;">
            <i class="bi bi-collection text-muted" style="font-size: 2.5rem;"></i>
        </div>
    </div>
    <h3 class="heading-font text-maroon mb-3">{% trans "No Content Available" %}</h3>
    <p class="body-font text-muted mb-4">{% trans "Content will appear here once it's uploaded." %}</p>
    {% if user.is_staff %}
        <a href="{% url 'frontend_api:upload_content' %}" class="btn btn-primary rounded-pill px-4">
            <i class="bi bi-cloud-upload me-2"></i>{% trans "Upload Content" %}
        </a>
    {% endif %}
</section>
{% endif %}

{% endblock %}